# 产品指南

## 初始构想
创建一个根据微信公众号文章的网址可以把微信公众号的文章转换成 Markdown 格式，根据文章名字命名文件，保存到本地，还可以下载文章中的图片的工作流。

## 产品愿景
一款高效、可靠的生产力工具，旨在帮助用户建立私有的微信公众号文章知识库。它不仅能完美保留文章的排版结构和图片资源，还具备灵活的扩展性，能够打通本地文件系统与飞书云文档之间的壁垒。

## 路线图与阶段规划

### 第一阶段：本地归档 (V0.1)
重点在于稳健的抓取和高质量的本地转换。
- **核心功能：** 通过命令行接收微信文章 URL 并将其转换为 Markdown。
- **元数据提取：** 提取并保存文章元数据（标题、作者、日期、公众号名称）为 YAML Frontmatter。
- **资源管理：** 下载所有图片到本地，并重写 Markdown 链接指向本地路径。

### 第一阶段扩展：云端同步 (V0.2)
重点在于集成与生产力提升。
- **飞书集成：** 对接飞书开放平台 API。
- **同步工作流：** 解析归档内容，并将其一键导入为飞书云文档。
- **图床处理：** 解决防盗链，将图片转存至飞书云空间。

### 第二阶段：Web 界面化改造 (V0.3)
重点在于降低使用门槛，提供可视化的操作体验。
- **Web Dashboard：** 基于 Next.js 构建现代化管理后台。
- **个性化欢迎语：** 智能识别用户登录态，动态切换欢迎语（“欢迎回来...”）。
- **可视化任务管理：** 网页输入 URL，实时查看抓取与同步进度。
- **历史记录管理：** 提供可视化的历史转存列表。

### 第三阶段：SaaS 服务化 (V0.4)
重点在于多用户支持与安全性保障。
- **飞书 OAuth 2.0 登录：** 支持用户通过飞书扫码登录，并在右上角显示用户头像与昵称，提供退出菜单。
- **个人空间所有权转换：** 切换 API 调用身份为“用户身份”，使转存文档的所有者直接为用户本人，拥有完整管理权限。
- **Token 安全管理：** 后端加密存储用户的 Token，实现自动刷新与注销清理。
- **部署适配：** 准备 PM2 进程托管与 Nginx 反向代理配置，适配公网环境。

### 第四阶段：社区与探索 (V0.5)
重点在于通过“双重面孔”系统建立内容的社会化连接。
- **透明数据看板 (Open Stats)：** 在首页 Hero 区域展示“累计转存篇数”、“今日新增”及“节省时间”等核心指标。
- **公共面孔 (未登录 - 热门榜单)：** 列表演变为“热门转存”排行榜，展示社区最受关注的内容。
- **私人面孔 (已登录 - 个人空间)：** 列表自动切换为“我的转存历史”，展示个人的精确记录与状态。
- **极简 Tab 切换：** 支持在“我的转存”与“热门榜单”之间快速切换。

## 关键约束
- **Markdown 兼容性：** 生成的 Markdown 适配标准编辑器及飞书导入要求。
- **安全第一：** 用户凭证全链路加密，保护用户隐私。
- **高保真：** 像素级还原微信文章排版，智能去除干扰信息。